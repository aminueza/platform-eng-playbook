<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 940 300" width="940" height="300">
  <defs>
    <linearGradient id="monoGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#ef4444" />
      <stop offset="100%" style="stop-color:#dc2626" />
    </linearGradient>
    <linearGradient id="wrapGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#3b82f6" />
      <stop offset="100%" style="stop-color:#2563eb" />
    </linearGradient>
    <linearGradient id="shrunkGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#22c55e" />
      <stop offset="100%" style="stop-color:#16a34a" />
    </linearGradient>
    <linearGradient id="svcGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#8b5cf6" />
      <stop offset="100%" style="stop-color:#7c3aed" />
    </linearGradient>
    <filter id="sh" x="-10%" y="-10%" width="120%" height="130%">
      <feDropShadow dx="0" dy="3" stdDeviation="4" flood-opacity="0.08"/>
    </filter>
    <marker id="arr" markerWidth="8" markerHeight="6" refX="7" refY="3" orient="auto">
      <polygon points="0 0, 8 3, 0 6" fill="#94a3b8"/>
    </marker>
  </defs>

  <!-- Background -->
  <rect width="940" height="300" rx="8" fill="#f8fafc"/>

  <!-- Title -->
  <text x="470" y="28" font-family="Segoe UI, system-ui, sans-serif" font-size="15" font-weight="700" fill="#0f172a" text-anchor="middle">Strangler Fig Pattern</text>

  <!-- ======== STEP 1 ======== -->
  <g transform="translate(30, 48)">
    <rect x="25" y="0" width="170" height="24" rx="12" fill="url(#monoGrad)"/>
    <text x="110" y="16" font-family="Segoe UI, system-ui, sans-serif" font-size="10" font-weight="700" fill="white" text-anchor="middle">STEP 1: Identify</text>

    <!-- Monolith -->
    <rect x="10" y="34" width="200" height="140" rx="10" fill="white" stroke="#ef4444" stroke-width="2" filter="url(#sh)"/>
    <rect x="10" y="34" width="200" height="32" rx="10" fill="url(#monoGrad)"/>
    <rect x="10" y="56" width="200" height="10" fill="url(#monoGrad)"/>
    <text x="110" y="56" font-family="Segoe UI, system-ui, sans-serif" font-size="12" font-weight="600" fill="white" text-anchor="middle">Monolith</text>

    <!-- Svc A target -->
    <rect x="28" y="82" width="80" height="40" rx="6" fill="#fef2f2" stroke="#ef4444" stroke-width="1.5" stroke-dasharray="5,3"/>
    <text x="68" y="100" font-family="Segoe UI, system-ui, sans-serif" font-size="10" font-weight="600" fill="#b91c1c" text-anchor="middle">Svc A</text>
    <text x="68" y="114" font-family="Segoe UI, system-ui, sans-serif" font-size="9" fill="#b91c1c" text-anchor="middle">(target)</text>

    <!-- Svc B -->
    <rect x="118" y="82" width="74" height="40" rx="6" fill="#f1f5f9" stroke="#cbd5e1" stroke-width="1"/>
    <text x="155" y="106" font-family="Segoe UI, system-ui, sans-serif" font-size="10" font-weight="500" fill="#64748b" text-anchor="middle">Svc B</text>

    <!-- Caption -->
    <text x="110" y="150" font-family="Segoe UI, system-ui, sans-serif" font-size="9" fill="#94a3b8" text-anchor="middle">Everything coupled</text>
    <text x="110" y="162" font-family="Segoe UI, system-ui, sans-serif" font-size="9" fill="#94a3b8" text-anchor="middle">Single deploy, single failure</text>

    <!-- Bottom label -->
    <text x="110" y="200" font-family="Segoe UI, system-ui, sans-serif" font-size="9" fill="#64748b" text-anchor="middle">Find the clearest boundary</text>
  </g>

  <!-- Arrow 1 -->
  <line x1="255" y1="142" x2="305" y2="142" stroke="#94a3b8" stroke-width="2" marker-end="url(#arr)"/>

  <!-- ======== STEP 2 ======== -->
  <g transform="translate(315, 48)">
    <rect x="15" y="0" width="200" height="24" rx="12" fill="url(#wrapGrad)"/>
    <text x="115" y="16" font-family="Segoe UI, system-ui, sans-serif" font-size="10" font-weight="700" fill="white" text-anchor="middle">STEP 2: Wrap with API</text>

    <!-- Monolith -->
    <rect x="10" y="34" width="210" height="140" rx="10" fill="white" stroke="#3b82f6" stroke-width="2" filter="url(#sh)"/>
    <rect x="10" y="34" width="210" height="32" rx="10" fill="url(#wrapGrad)"/>
    <rect x="10" y="56" width="210" height="10" fill="url(#wrapGrad)"/>
    <text x="115" y="56" font-family="Segoe UI, system-ui, sans-serif" font-size="12" font-weight="600" fill="white" text-anchor="middle">Monolith</text>

    <!-- API wrapper -->
    <rect x="30" y="78" width="170" height="76" rx="6" fill="#fffbeb" stroke="#f59e0b" stroke-width="1.5"/>
    <text x="115" y="94" font-family="Segoe UI, system-ui, sans-serif" font-size="10" font-weight="600" fill="#92400e" text-anchor="middle">Internal API</text>

    <!-- Svc A inside API -->
    <rect x="48" y="102" width="134" height="36" rx="5" fill="#fef2f2" stroke="#ef4444" stroke-width="1"/>
    <text x="115" y="124" font-family="Segoe UI, system-ui, sans-serif" font-size="10" font-weight="600" fill="#b91c1c" text-anchor="middle">Svc A (behind API)</text>

    <!-- Caption -->
    <text x="115" y="166" font-family="Segoe UI, system-ui, sans-serif" font-size="9" fill="#94a3b8" text-anchor="middle">App calls through API now</text>

    <!-- Bottom label -->
    <text x="115" y="200" font-family="Segoe UI, system-ui, sans-serif" font-size="9" fill="#64748b" text-anchor="middle">Create the seam first</text>
  </g>

  <!-- Arrow 2 -->
  <line x1="550" y1="142" x2="600" y2="142" stroke="#94a3b8" stroke-width="2" marker-end="url(#arr)"/>

  <!-- ======== STEP 3 ======== -->
  <g transform="translate(610, 48)">
    <rect x="25" y="0" width="200" height="24" rx="12" fill="url(#shrunkGrad)"/>
    <text x="125" y="16" font-family="Segoe UI, system-ui, sans-serif" font-size="10" font-weight="700" fill="white" text-anchor="middle">STEP 3: Extract</text>

    <!-- Smaller monolith -->
    <rect x="0" y="34" width="130" height="100" rx="10" fill="white" stroke="#22c55e" stroke-width="2" filter="url(#sh)"/>
    <rect x="0" y="34" width="130" height="32" rx="10" fill="url(#shrunkGrad)"/>
    <rect x="0" y="56" width="130" height="10" fill="url(#shrunkGrad)"/>
    <text x="65" y="56" font-family="Segoe UI, system-ui, sans-serif" font-size="11" font-weight="600" fill="white" text-anchor="middle">Monolith</text>
    <text x="65" y="90" font-family="Segoe UI, system-ui, sans-serif" font-size="9" fill="#64748b" text-anchor="middle">Smaller</text>
    <text x="65" y="103" font-family="Segoe UI, system-ui, sans-serif" font-size="9" fill="#64748b" text-anchor="middle">Svc B stays</text>
    <text x="65" y="126" font-family="Segoe UI, system-ui, sans-serif" font-size="9" fill="#94a3b8" text-anchor="middle">Less risk per deploy</text>

    <!-- Dashed connection -->
    <line x1="132" y1="84" x2="155" y2="84" stroke="#94a3b8" stroke-width="1.5" stroke-dasharray="4,3"/>

    <!-- Extracted service -->
    <rect x="157" y="34" width="140" height="100" rx="10" fill="white" stroke="#8b5cf6" stroke-width="2" filter="url(#sh)"/>
    <rect x="157" y="34" width="140" height="32" rx="10" fill="url(#svcGrad)"/>
    <rect x="157" y="56" width="140" height="10" fill="url(#svcGrad)"/>
    <text x="227" y="56" font-family="Segoe UI, system-ui, sans-serif" font-size="11" font-weight="600" fill="white" text-anchor="middle">Extracted Svc</text>
    <text x="227" y="90" font-family="Segoe UI, system-ui, sans-serif" font-size="9" fill="#64748b" text-anchor="middle">Own deploy cycle</text>
    <text x="227" y="103" font-family="Segoe UI, system-ui, sans-serif" font-size="9" fill="#64748b" text-anchor="middle">Own failure domain</text>
    <text x="227" y="126" font-family="Segoe UI, system-ui, sans-serif" font-size="9" fill="#94a3b8" text-anchor="middle">Same API, new home</text>

    <!-- Bottom label -->
    <text x="148" y="200" font-family="Segoe UI, system-ui, sans-serif" font-size="9" fill="#64748b" text-anchor="middle">Callers don't know it moved</text>
  </g>

  <!-- Bottom summary line -->
  <text x="470" y="282" font-family="Segoe UI, system-ui, sans-serif" font-size="10" fill="#94a3b8" text-anchor="middle">The rest of the app never knows the implementation moved. That's the point.</text>
</svg>
